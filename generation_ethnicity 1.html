<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Ethnic Composition by Generation</title>
        <link href="//fonts.googleapis.com/css?family=Roboto+Condensed:400,700" rel="stylesheet" type="text/css">
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script src="js/iframeResizer.contentWindow.min.js"></script>
        <script src="js/jquery.appear.iframe.js"></script>
		<style type="text/css">
            body {
                background-color: #EFEFEF;
            }
            #container {
                min-width: 310px;
                max-width: 700px;
                height: 350px;
                margin: 0 auto;
                font-family: 'Roboto Condensed';
                background: #EFEFEF;
            }
		</style>
		<script type="text/javascript">

    	</script>
	</head>
    	<body>
        <div id="container" data-appear-top-offset="-300"></div>

        <!-- Placed at the end of the document so the pages load faster -->
        <script src="js/highcharts.js"></script>
        <script type="text/javascript">
            (function (H) {
                function deferRender (proceed) {
                    var series = this, 
                        $renderTo = $(this.chart.container.parentNode);
                    // It is appeared, render it
                    if ($renderTo.is(':appeared') || !series.options.animation) {
                        proceed.call(series);
                    // It is not appeared, halt renering until appear
                    } else  {
                        $renderTo.appear(); // Initialize appear plugin
                        $renderTo.on('appear', function () {
                            proceed.call(series);
                        });
                    }
                };

                H.wrap(H.Series.prototype, 'render', deferRender);

            }(Highcharts));

            Highcharts.setOptions({
                chart: {
                    style: {
                        fontFamily: 'Roboto Condensed'
                    },
                    backgroundColor: '#EFEFEF'
                },
                lang: { 
                    thousandsSep: ','
                },
                credits: {
                    enabled: false
                },
                exporting: {
                    enabled: false
                }
            });

            $('#container').highcharts({
                chart: {
                    type: 'column'
                },
                legend: {
                    align: 'center',
                    x: 20,
                },
                title: {
                    text: 'Ethnic Composition by Generation',
                    align: 'center',
                    x: 20,
                    style: {
                        fontWeight: '700',
                        fontSize: '28px',
                    }
                },
                xAxis: {
                    categories: ['70+', 'Baby Boomers', 'Generation X', 'Millennials']
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Ethnic composition'
                    }
                },
                tooltip: {
                    pointFormat: '<span style="color:{series.color}">{series.name}</span>: <b>({point.percentage:.0f}%)</b> <br/>',
                    shared: true
                },
                plotOptions: {
                    column: {
                        stacking: 'percent'
                    },
                    series: {
                        pointPadding: 0.05,
                        groupPadding: 0.1,
                        animation: {
                            duration: 2000
                        }
                    }
                },
                series: [{
                    name: 'White',
                    data: [78, 72, 61, 57],
                    color: '#9E2531'
                }, {
                    name: 'Black',
                    data: [8, 11, 12, 13],
                    color: '#95B56E'
                }, {
                    name: 'Hispanic',
                    data: [8, 10, 18, 21],
                    color: '#4C5F85'
                },{
                    name: 'Asian',
                    data: [4, 5, 7, 6],
                    color: '#84621A'
                },{
                    name: 'Other',
                    data: [1, 2, 2, 3],
                    color: '#B8D9EF'
                }]
            });
        </script>
	</body>
</html>
